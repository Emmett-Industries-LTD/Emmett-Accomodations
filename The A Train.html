<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Take the A train</title>
    </head>
    <body>
        <h1>Welcome to harlem!</h1>
        <h1>All aboard the A train!</h1>
        <h1 id="commentary"></h1>
        <div style="width: 100%; height: 50%; position: fixed; top:0px; right: 0px; margin-top:0px;" id="screen">
            
        </div>
        <div style="width: 100%; height: 50%; position: fixed; top:50%; right: 0px; margin-bottom:0px;" id="screenBottom">
            
        </div>
        <button style="position: fixed; top: 120px;" onclick="forWards()"><h1>forwards</h1></button>
        <button style="position: fixed; top: 200px;" onclick="backWards()"><h1>backwards</h1></button>
        <button style="position: fixed; top: 420px;" onclick="lookRight()"><h1>look right</h1></button>
        <button style="position: fixed; top: 500px;" onclick="lookLeft()"><h1>look left</h1></button>
        <script>
            var n = "nothing";
            var w = "wool";
            var data = [
                // 2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9
                [n,n,n,n,n,n,n,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,n,n,n,n],
                [n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n],
                [n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n],
                [n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n],
                [n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n],
                [n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n],
                [n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n],
                [n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n],
                [n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n,n,n,n,n,w,w,w,w,w,n,n,n,n],
                [w,w,w,w,w,w,w,w,w,w,w,w,n,n,n,n,w,w,w,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,w,w,n,n,n,n,w,w,w,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,w,w,n,n,n,n,w,w,w,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,w,w,n,n,n,n,n,n,n,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,w,w,n,n,n,n,n,n,n,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,w,w,n,n,n,n,n,n,n,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,w,w,n,n,n,n,w,w,w,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,w,w,n,n,n,n,w,w,w,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,w,n,n,n,n,n,w,w,w,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,w,n,n,n,n,n,w,w,w,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,n,n,n,n,n,w,w,w,w,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,n,n,n,n,n,w,w,w,w,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,n,n,n,n,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],
                [w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w]
            ];
            var pos = {x:16,y:4};
            var view = 1;
            var commentary = document.getElementById("commentary");
            loadPage();
            function lookRight(){
                view = CheckView(view + 1)
                console.log(view)
            }
            function lookLeft(){
                view = CheckView(view - 1)
                console.log(view)
            }
            function forWards(){
                pos.x -= getSideValues(CheckView(view))[0]; //ray x value
                pos.y -= getSideValues(CheckView(view))[1]; //ray y value
            }
            function backWards(){
                pos.x += getSideValues(CheckView(view))[0]; //ray x value
                pos.y += getSideValues(CheckView(view))[1]; //ray y value
            }
            function loadPage(){
                var rays = [];
                var rays2 = [];
                var x, y, xyplus, yadjust, xadjust;
                for(Viewside=-4,i=0;Viewside<=4; Viewside+=1, i+=1){
                    x = Math.round(pos.x);
                    y = Math.round(pos.y);
                    yadjust = 0;//distance of y traveled
                    xadjust = 1;//distance of x traveled
                    xyplus = getSideValues(CheckView(view + (Viewside))); //the ray value
                    while(data[Math.round(y)][Math.round(x)]=="nothing"){
                        x += Addeven(xyplus[0]); //ray x value
                        y += Addeven(xyplus[1]); //ray y value
                        xadjust += Addeven(xyplus[0])
                        yadjust += Addeven(xyplus[1])
                    }
                    rays[i] = "<div style='position:absolute; width: "+100/9+"%; left:" + ((100/9)*i) + "%; border: none; bottom:0px; height: " 
                    + (Math.sqrt(Plus(Addeven(xadjust)**2) + Plus(Addeven(yadjust)**2))*50) + 
                    "px; background-color: brown'></div> " 
                    rays2[i] = "<div style='position:absolute; width: "+100/9+"%; left:" + ((100/9)*i) + "%; border: none; top:0px; height: " 
                    + (Math.sqrt(Plus(Addeven(xadjust)**2) + Plus(Addeven(yadjust)**2))*50) + 
                    "px; background-color: brown'></div> ";
                    // console.log(x + ",  " + y)
                }
                document.getElementById("screen").innerHTML = rays;
                document.getElementById("screenBottom").innerHTML = rays2;
                if(pos.x>=12&&pos.x<16){commentary.innerHTML = "you are in the A train tunnels in Harlem"}
                else{commentary.innerHTML = ""}
                setTimeout(loadPage,20)
            }
            function Plus(numb){
                if(numb<0){
                    return -(numb);
                }else{
                    return numb;
                }
            }
            function Addeven(decimalNumber){
                return Math.floor(decimalNumber*10)/10
            }
            function CheckView(viewNumber){
                if(viewNumber<=0){ //fixed problem
                    return 20+viewNumber;
                }else if(viewNumber>20){
                    return viewNumber-20;
                }else{
                    return viewNumber;
                }
            }
            function getSideValues(side){
                var number;
                if(side==1){
                    number = [0, -1]; //x, y 
                }
                else if(side==2){
                    number = [0.55, -1];
                }
                else if(side==3){
                    number = [0.8, -1];
                }
                // x: more == right, y: more == down
                else if(side==4){
                    number = [1, -0.8];
                }
                else if(side==5){
                    number = [1, -0.55];
                }
                else if(side==6){
                    number = [1, 0];
                }
                else if(side==7){
                    number = [1, 0.55];
                }
                else if(side==8){
                    number = [1, 0.8];
                }
                else if(side==9){
                    number = [0.8, 1];
                }
                else if(side==10){
                    number = [0.55, 1];
                }
                else if(side==11){
                    number = [0, 1];
                }
                else if(side==12){
                    number = [-0.55, 1];
                }
                else if(side==13){
                    number = [-0.8, 1];
                }
                else if(side==14){
                    number = [-1, 0.8];
                }
                else if(side==15){
                    number = [-1, 0.55];
                }
                else if(side==16){
                    number = [-1, 0];
                }
                else if(side==17){
                    number = [-1, -0.55];
                }
                else if(side==18){
                    number = [-1, -0.8];
                }
                else if(side==19){
                    number = [-0.8, -1];
                }
                else if(side==20){
                    number = [-0.55, -1];
                }
                return number;
            }
        </script>        
    </body>
</html>