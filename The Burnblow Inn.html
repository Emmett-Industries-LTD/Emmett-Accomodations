<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Burnblow Inn</title>
</head>
<body>
    <div id="entirePage" style="position:fixed;background-color: antiquewhite;top:0%;left: 0%; width: 100%; height: 100%;">
    </div>
    <h1 id="startingText" style="position: fixed; top:0px;">
        Welcome to the Burnblow Inn, known for our soft large beds and lovely jovely wooden rooms, in south wales. It is the main Inn for the sailors, 
        workers, and travlers who have a ten and a half silver pennies for the a stay. We invite you for a stay! 
        Welcome to the year of 1750!
    </h1>
    <button onmousedown="down='yes';leftWays()" onmouseup="down='no';" id="buttonLeft" style="position: fixed; bottom:5%; right: 10%"><h1>Forward</h1></button>
    <button onmousedown="down='yes';sideWaysLeft()" onmouseup="down='no';" id="buttonLeft" style="position: fixed; bottom:5%; right: 20%"><h1>Sideways left</h1></button>
    <script>
        var Page = document.getElementById("entirePage");
        var loadPaging = setInterval(loadPage, 25); //loads page every few moments
        var playerPosition = {y:12, x:9} //x and y positions
        var View = 1; 
        var threeDimentionalWorldValues;
        var RayValues = [0,0,0,0,0,0,0,0,0,0,0]
        var BurnblowInnData = [
            ["dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt"],
            ["dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt"],
            ["dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt"],
            ["dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt","dirt"],
            ["wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","wool","wool","wood","wool","wool","none","wood","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","none","none","none","none","wool","none","wood","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","none","none","none","none","none","none","wood","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","wood","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
            ["wood","wood","wood","wood","wood","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","none","wood","wood","wood","wood","wood"],
        ];
        function leftWays(){
            playerPosition.x += 0.1;
            if(down=="yes") setTimeout(leftWays, 25);
        }
        function sideWaysLeft(){
            if(View>46) View = 1;
            else if(View<=46) View += 1;
            if(down=='yes') setTimeout(sideWaysLeft, 25);
        }
        function loadPage(){
            var PageInnerHTML = "";
            threeDimentionalWorldValues = 
            [[],[],[],[],[],[],[],[],[],[], [],[],[],[],[],[],[],[],[],[], [],[],[],[],[],[],[],[],[],[], [],[],[],[],[],[],[],[],[],[], [],[],[],[],[],[],[],[],[],[], [],[],[],[],[],[],[],[],[],[], [],[],[],[],[],[],[],[],[],[], [],[],[],[],[],[],[],[],[],[], [],[],[],[],[],[],[],[],[],[], [],[],[],[],[],[],[],[],[],[]];
            for(y = playerPosition.y - 5; y < playerPosition.y + 5; y += 0.1){ //there are 10 times more values than with the original BurnblowInnData
                threeDimentionalWorldValues[((y - playerPosition.y) + 5) * 10] = 
                ["","","","","","","","","","", "","","","","","","","","","", "","","","","","","","","","", "","","","","","","","","","", "","","","","","","","","","", "","","","","","","","","","", "","","","","","","","","","", "","","","","","","","","","", "","","","","","","","","","", "","","","","","","","","",""];
                for(x = playerPosition.x - 5; x < playerPosition.x + 5; x += 0.1) { // "playerPosition.x - 5" center of page from left to right is the x position of player, to the left is the less than the x position of player, and to the right is more 
                    threeDimentionalWorldValues[((y - playerPosition.y) + 5) * 10][((x - playerPosition.x) + 5) * 10] = 
                        BurnblowInnData[Math.floor(playerPosition.y + 5)][Math.floor(playerPosition.x + 5)];
                }
            }
            middleView = [rayCalculate((View), "side"), rayCalculate(View, "up")];
            console.log(middleView +" veiw "+ View);
            var rayDistancePosition = {x:50,y:50};
            for(ModifiedView = 0; ModifiedView <= 10; ModifiedView += 0.1){
                while(RayValues[ModifiedView] == 0){
                    rayDistancePosition.x = 
                        rayDistancePosition.x + 
                        rayCalculate(backToOne(View + ((ModifiedView - 5) * 10)), "side"); // the side position of the rays beside to the middle view ray
                    rayDistancePosition.y = 
                        rayDistancePosition.x + 
                        rayCalculate(backToOne(View + ((ModifiedView - 5) * 10)), "up"); // the up position of the rays beside to the middle view ray;
                    if(
                        threeDimentionalWorldValues[Math.floor(rayDistancePosition.y)][Math.floor(rayDistancePosition.x)] !=
                        "none"
                    ){
                        RayValues[ModifiedView][0] = 
                            threeDimentionalWorldValues[Math.floor(rayDistancePosition.y)][Math.floor(rayDistancePosition.x)] 
                    }
                } 
            }
            //Page.innerHTML = PageInnerHTML;
        }
        function rayCalculate(veiwPoint, axis){
            var ViewModified;
            if(veiwPoint >= 36){ // return angle of of what side the direction is pointing
                ViewModified = veiwPoint - 35;
            }else if(veiwPoint >= 24){
                ViewModified = veiwPoint - 23;
            }else if(veiwPoint >=12){
                ViewModified = veiwPoint - 11;
            }else if(veiwPoint >= 1){
                ViewModified = veiwPoint;
            }
            //sides are numbered highest to greatest in counterclockwise, 11 on each side
            //refer to: 1-11 up (+y), 12-23 left (-x), 24-35, down (-y), 36-47, right(+x)
            if(axis == "side"){ // if ray is to the side, then the x axis ray is being determined
                if(veiwPoint >= 36){ // the ray direction is sideways, so it is the y axis direction that changes and the x axis just changesby one
                    return 1;
                }else if(veiwPoint >= 24){ // the ray direction is sideways, so it is the y axis direction that changes
                    return -(ViewModified - 6) / 6; //negative, -(-5) = +5
                }else if(veiwPoint >= 12){
                    return -1;
                }else if(veiwPoint >= 1){
                    return (ViewModified - 6) / 6; //positive, opposite to the other side
                }
            }else if(axis == "up"){ // if ray is upwards, then the y axis ray is being determined
                if(veiwPoint >= 36){
                    return (ViewModified - 6) / 6;
                }else if(veiwPoint >= 24){ // the ray direction is sideways, so it is the y axis direction that changes
                    return -1; //negative
                }else if(veiwPoint >= 12){
                    return -(ViewModified - 6) / 6;
                }else if(veiwPoint >= 1){
                    return 1; //positive, opposite to the bottom
                }
            }
        }
        function backToOne(number){
            if(number>47){
                return 1;
            }
            if(number<1){
                return 47;
            }
        }
    </script>
</body>